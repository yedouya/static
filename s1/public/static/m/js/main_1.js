var globalParam={shareUrl:"http://mo.kugou.com/download/app/index.php",shareTitle:"听音乐，我用酷狗！",shareContent:"[听]海量高品质音乐；[看]MV、演艺直播、明星访谈精彩呈现；[唱]出好声音，一秒变K歌达人——7亿用户的选择，最好玩的音乐播放器！",shareImg:"images/index.jpg"};function touchChange(e){var a=this,t=navigator.userAgent.toLowerCase(),o=/android|Adr/gi.test(t),i=/iphone|ipad|ipod/gi.test(t);a.pc=!o&&!i;a.node=document.getElementById(e.id);a.section=Kg.$("#pages");a.list=Kg.$("#"+e.id+" .page");a.originalCoord={x:0,y:0};a.shiftCoord={x:0,y:0};a.finalCoord={x:0,y:0};a.o=Kg.getBodySize();Kg.$(a.node).css("height",a.o.cH+"px");a.list.css("height",a.o.cH+"px");a.change=true;a.touch=false;a.page=a.list.length;a.now=0;a.pageList=Kg.$(".pageList");a.nowPage=a.pageList[0];a.maxTx=-(a.page-1)*a.o.cH;a.start=a.pc?"mousedown":"touchstart";a.on=a.pc?"mousemove":"touchmove";a.end=a.pc?"mouseup":"touchend"}touchChange.prototype={init:function(){var e=this;e.nowPage.style.display="block";document.addEventListener(e.start,function(a){if(e.change){e.originalCoord.y=e.pc?a.clientY:a.targetTouches[0].pageY;e.shiftCoord.y=e.pc?a.clientY:a.targetTouches[0].pageY;e.finalCoord.y=e.originalCoord.y;e.touch=true;e.y=0}else{e.touch=false}},false);document.addEventListener(e.on,function(a){a.preventDefault();if(e.touch){e.finalCoord.y=e.pc?a.clientY:a.targetTouches[0].pageY;e.y=-e.originalCoord.y+e.finalCoord.y;e.tx=-e.now*e.o.cH+e.y;e.tx=e.tx>0?0:e.tx<e.maxTx?e.maxTx:e.tx;e.section.attr("style","-webkit-transform:translate(0px,"+e.tx+"px) translateZ(0px);-moz-transform:translate(0px,"+e.tx+"px) translateZ(0px);transform:translate(0px,"+e.tx+"px) translateZ(0px);")}},false);document.addEventListener(e.end,function(a){if(e.change&&e.touch){e.change=false;e.touch=false;if(e.y<-50){e.now++;e.now=e.now==e.page?e.page-1:e.now}else if(e.y>50){e.now--;e.now=e.now<0?0:e.now}e.section.attr("style","-webkit-transform:translate(0px,"+-e.now*e.o.cH+"px) translateZ(0px);-webkit-transition:all 0.3s;-moz-transform:translate(0px,"+-e.now*e.o.cH+"px) translateZ(0px);-moz-transition:all 0.3s;transform:translate(0px,"+-e.now*e.o.cH+"px) translateZ(0px);transition:all 0.3s;");setTimeout(function(){if(e.y<-50||e.y>50){e.nowPage.style.display="none";e.nowPage=e.pageList[e.now];e.nowPage.style.display="block"}e.change=true},310)}},false)},toPage:function(e){var a=this;a.nowPage.style.display="none";a.now=e;a.nowPage=a.pageList[a.now];a.nowPage.style.display="block";a.section.attr("style","-webkit-transform:translate(0px,"+-a.now*a.o.cH+"px) translateZ(0px);")}};var page={init:function(){var e=this;var a=new touchChange({id:"main"});a.init();globalParam.bodyH=Kg.$("body")[0].clientHeight;globalParam.bodyW=Kg.$("body")[0].clientWidth;globalParam.scale=globalParam.bodyH/globalParam.bodyW;if(globalParam.scale<1.77){var t=globalParam.bodyH/1.77;Kg.$(".pageBox").attr("style","width:"+t+"px;margin:0 auto;font-size:"+t/20+"px;")}Kg.$("#main").attr("style","height:"+globalParam.bodyH+"px");Kg.$("#share").addEvent("click",function(){e.share()});Kg.$("#tot").addEvent("click",function(){a.toPage(0)});Kg.$("#tot1").addEvent("click",function(){a.toPage(0)});if(Kg.UA.isWeiXin&&Kg.UA.android){Kg.$("#D1").attr("href","http://a.app.qq.com/o/simple.jsp?pkgname=com.kugou.android")}else if(Kg.UA.isWeiXin&&Kg.UA.iphone){Kg.$("#D3").attr("href","http://a.app.qq.com/o/simple.jsp?pkgname=com.kugou.android");Kg.$("#D2").addEvent("click",function(){Kg.$("#popMask").show()}).attr("href","javascript:void(0)");Kg.$("#popMask").html('<img src="images/ios_pop.png" />');Kg.$("#popMask").addEvent("click",function(){Kg.$("#popMask").hide()})}Kg.$("#shareWeixin").addEvent("click",function(){Kg.$(this).hide()})},share:function(){if(Kg.UA.isWeiXin){Kg.$("#shareWeixin").show()}else{shareToAll("sina")}}};page.init();var dataForWeixin={appId:"",MsgImg:globalParam.shareImg,url:globalParam.shareUrl,title:globalParam.shareTitle,desc:globalParam.shareContent,fakeid:"",callback:function(){Kg.$("#shareWeixin").hide()}};(function(){var e=function(){WeixinJSBridge.on("menu:share:appmessage",function(e){WeixinJSBridge.invoke("sendAppMessage",{appid:dataForWeixin.appId,img_url:dataForWeixin.MsgImg,img_width:"120",img_height:"120",link:dataForWeixin.url,desc:dataForWeixin.desc,title:dataForWeixin.title},function(e){dataForWeixin.callback()})});WeixinJSBridge.on("menu:share:timeline",function(e){WeixinJSBridge.invoke("shareTimeline",{img_url:dataForWeixin.MsgImg,img_width:"400",img_height:"400",link:dataForWeixin.url,desc:dataForWeixin.title,title:dataForWeixin.title},function(e){dataForWeixin.callback()})})};if(document.addEventListener){document.addEventListener("WeixinJSBridgeReady",e,false)}else if(document.attachEvent){document.attachEvent("WeixinJSBridgeReady",e);document.attachEvent("onWeixinJSBridgeReady",e)}})();function shareToAll(e){var a={popupWidth:615,popupHeight:505,site:"",appkey:"",source:"",ralateUid:""},t="",o="",i=true;var n=encodeURIComponent(globalParam.shareTitle),r=encodeURIComponent(globalParam.shareUrl),s=encodeURIComponent(globalParam.shareContent),l=encodeURIComponent(globalParam.shareImg+"?"+Math.random());_swf=encodeURIComponent(globalParam.shareSwf||"");switch(e){case"qzone":t="http://sns.qzone.qq.com/cgi-bin/qzshare/cgi_qzshare_onekey";o=["url="+r,"title="+n,"desc="+s,"pics="+l].join("&");break;case"rr":a.popupHeight=560;t="http://widget.renren.com/dialog/share";o=["link="+r,"title="+n,"image_src="+l,"description="+s].join("&");break;case"sina":a.popupWidth=615;a.popupHeight=505;t="http://service.t.sina.com.cn/share/share.php";o=["url="+r,"appkey="+a.appkey,"title="+n,"pic="+l,"ralateUid="+a.ralateUid].join("&");break;case"qq":a.popupWidth=700;a.popupHeight=680;var p=encodeURIComponent(a.appkey);var g=l;t="http://v.t.qq.com/share/share.php";o=["title="+s,"url="+r,"appkey="+p,"site="+a.site,"desc="+s,"pic="+g].join("&");break;default:return}var c=(screen.width-a.popupWidth)/2,d=(screen.height-a.popupHeight)/2,h=t+"?"+o;setTimeout(function(){location.href=h},300)}